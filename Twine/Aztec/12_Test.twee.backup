:: Dakota Test Passage [Done Breaks] {"position":"338,1151","size":"100,100"}
<<liveblock>>
As a global var:
<br>
<<if ndef $incrementTest>>
	<<th-set '$incrementTest' to 0>>
<</if>>
<<button "send">>
		<<set $incrementTest = $incrementTest + 1>>
	<</button>>
<<print $incrementTest>>
<br>

As character var:
<br>

<<if ndef $users[$role]["choices"]["incrementTest"]>>
	<<set $users[$role]["choices"]["incrementTest"] = 0>>
<</if>>
<<button "send_everyone">>
		<<set $users[$role]["choices"]["incrementTest"] = $users[$role]["choices"]["incrementTest"] + 1>>
	<</button>>
<<print $users[$role]["choices"]["incrementTest"]>>
<<set _totalIncrements = setup.getTotalChoices("incrementTest")>>
 total: <<print _totalIncrements>>
<br><br>
<b>[[Test the new server-authoritative macros|th-set Test Passage]]</b>
<</liveblock>>



:: th-set Test Passage {"position":"338,1300","size":"100,100"}
<<liveblock>>
<h3>Testing Server-Authoritative Macros</h3>

<b>Simple Test (just sets to 42):</b><br>
Current value: <<print $thTestSimple || 0>><br>
<<button "Set to 42">>
	<<th-set '$thTestSimple' to 42>>
<</button>>
<<button "Set to 99">>
	<<th-set '$thTestSimple' to 99>>
<</button>>
<br><br>

<b>Increment Test (if variable exists):</b><br>
Current value: <<print $thTestIncrement || 0>><br>
<<button "Set to 1 (initialize)">>
	<<th-set '$thTestIncrement' to 1>>
<</button>>
<<if def $thTestIncrement>>
<<button "Increment by 1">>
	<<th-set '$thTestIncrement' to $thTestIncrement + 1>>
<</button>>
<<button "Increment by 5">>
	<<th-set '$thTestIncrement' to $thTestIncrement + 5>>
<</button>>
<</if>>
<br><br>

<b>String Test:</b><br>
Current value: "<<print $thTestString || '(empty)'>>"<br>
<<button "Set to 'Hello'">>
	<<th-set '$thTestString' to 'Hello'>>
<</button>>
<<button "Set to 'World'">>
	<<th-set '$thTestString' to 'World'>>
<</button>>
<br><br>

<b>Nested Path Test (using sendAction):</b><br>
<<if ndef $users>>
	<<set $users = {}>>
<</if>>
<<if ndef $role>>
	<<set $role = "God">>
<</if>>
<<if ndef $users[$role]>>
	<<set $users[$role] = {choices: {}}>>
<</if>>
<<if ndef $users[$role]["choices"]["nestedCounter"]>>
	<<set $users[$role]["choices"]["nestedCounter"] = 0>>
<</if>>
Current $role: <<print $role>><br>
Current nested counter: <<print $users[$role]["choices"]["nestedCounter"]>><br>
<<set _nestedPath = '$users["' + $role + '"]["choices"]["nestedCounter"]'>>
<<button "Initialize nested to 10">>
	<<sendAction _nestedPath 10>>
<</button>>
<<if def $users[$role]["choices"]["nestedCounter"]>>
<<button "Increment nested by 1">>
	<<sendAction _nestedPath ($users[$role]["choices"]["nestedCounter"] + 1)>>
<</button>>
<<button "Add 10 to nested">>
	<<sendAction _nestedPath ($users[$role]["choices"]["nestedCounter"] + 10)>>
<</button>>
<</if>>
<br><br>

<b>Array Test:</b><br>
<<if ndef $testArray>>
	<<set $testArray = [1, 2, 3]>>
<</if>>
Current array: [<<print $testArray.join(", ")>>]<br>
Array length: <<print $testArray.length>><br>
<<button "Push value 99">>
	<<run $testArray.push(99)>>
	<<th-set '$testArray' to $testArray>>
<</button>>
<<button "Set array to [10, 20, 30]">>
	<<th-set '$testArray' to [10, 20, 30]>>
<</button>>
<br><br>

[[Dashboard]]
<</liveblock>>



:: 7 Mini Game Test {"position":"850,975","size":"100,100"}

<iframe class="minigame" id="frame" src="https://lizterese.github.io/MyCDN/Malinche.html"/>

/* <iframe class="minigame" id="frame" src="https://lizterese.github.io/MyCDN/Stats.html?strength=5"/> */

You wake to find yourself back in the library, sprawled across the comfy chair. You missed dinner, but somehow your belly feels strangely full. You swear you can still taste the pulque on your lips, but that can't possibly be true... can it? <br>
<br>
You look at the stack of papers on the floor, and, sure enough, there's your latest history assignment, complete and ready to hand in. Buoyed by the knowledge that another A grade is coming your way, you pack up your things and head home. <br>
<br>


:: TestMap Passage {"position":"350,2225","size":"100,100"}
<<set $users[$role]["currentMap"] = 1>>



:: test equations {"position":"4350,850","size":"100,100"}
<<liveblock>>
<<print $factions["Aztecs"]["stats"]["Strength"]>><br>
<br>
cut Aztec Strength in half<br>
<br>
<<link "Halve Aztec Strength" "test equations outcome">><<set $factions["Aztecs"]["stats"]["Strength"]*=.5>><</link>>. <br>
<br>
Set Final Totals<br>
<br>
<<print $Final_Aztec_Points>><br>
<br>
<<print $Final_Aztec_Players>><br>
<br>
<<print $factions["Aztecs"]["stats"]["Strength"]>><br>
<br>
<<print $users["Moctezuma"]["stats"]["Loyalty"]>><br>
<br>
<<print $users["Moctezuma"]["stats"]["Strength"]>><br>
<br>
<<print $users["Moctezuma"]["stats"]["Wisdom"]>><br>
<br>

<<link "Set the Final Aztec Points" "test equations outcome">><<set $Final_Aztec_Players=$users["Moctezuma"]["stats"]["Strength"]+$users["Moctezuma"]["stats"]["Loyalty"]+$users["Moctezuma"]["stats"]["Wisdom"]+$users["Tlacaelel"]["stats"]["Strength"]+$users["Tlacaelel"]["stats"]["Loyalty"]+$users["Tlacaelel"]["stats"]["Wisdom"]+$users["Cuauhtemoc"]["stats"]["Strength"]+$users["Cuauhtemoc"]["stats"]["Loyalty"]+$users["Cuauhtemoc"]["stats"]["Wisdom"]+$users["Cacamatzin"]["stats"]["Strength"]+$users["Cacamatzin"]["stats"]["Loyalty"]+$users["Cacamatzin"]["stats"]["Wisdom"]+$users["Aztec_Priest"]["stats"]["Strength"]+$users["Aztec_Priest"]["stats"]["Loyalty"]+$users["Aztec_Priest"]["stats"]["Wisdom"]+$users["Pochteca"]["stats"]["Strength"]+$users["Pochteca"]["stats"]["Loyalty"]+$users["Pochteca"]["stats"]["Wisdom"]>><<set $Final_Aztec_Players/=6>><<set $Final_Aztec_Points=$factions["Aztecs"]["stats"]["Strength"]+$Final_Aztec_Players>><</link>>. <br>
<br>

<<link "Set the Final Spanish Points" "test equations outcome">><<set $Final_Spanish_Players=$users["Cortes"]["stats"]["Strength"]+$users["Cortes"]["stats"]["Loyalty"]+$users["Cortes"]["stats"]["Wisdom"]+$users["Alvarado"]["stats"]["Strength"]+$users["Alvarado"]["stats"]["Loyalty"]+$users["Alvarado"]["stats"]["Wisdom"]+$users["Aguilar"]["stats"]["Strength"]+$users["Aguilar"]["stats"]["Loyalty"]+$users["Aguilar"]["stats"]["Wisdom"]+$users["Marina"]["stats"]["Strength"]+$users["Marina"]["stats"]["Loyalty"]+$users["Marina"]["stats"]["Wisdom"]+$users["Garrido"]["stats"]["Strength"]+$users["Garrido"]["stats"]["Loyalty"]+$users["Garrido"]["stats"]["Wisdom"]+$users["Olid"]["stats"]["Strength"]+$users["Olid"]["stats"]["Loyalty"]+$users["Olid"]["stats"]["Wisdom"]>><<set $Final_Spanish_Players/=6>><<set $Final_Spanish_Points=$factions["Spaniards"]["stats"]["Strength"]+$Final_Spanish_Players>><</link>>. <br>
<br>


<<link "Set the Final Tlaxcalan Points" "test equations outcome">><<set $Final_Tlaxcalan_Players=$users["Xicotencatl_Elder"]["stats"]["Strength"]+$users["Xicotencatl_Elder"]["stats"]["Loyalty"]+$users["Xicotencatl_Elder"]["stats"]["Wisdom"]+$users["Xicotencatl_Younger"]["stats"]["Strength"]+$users["Xicotencatl_Younger"]["stats"]["Loyalty"]+$users["Xicotencatl_Younger"]["stats"]["Wisdom"]+$users["Maxixcatl"]["stats"]["Strength"]+$users["Maxixcatl"]["stats"]["Loyalty"]+$users["Maxixcatl"]["stats"]["Wisdom"]>><<set $Final_Tlaxcalan_Players/=3>><<set $Final_Tlaxcalan_Points=$factions["Tlaxcalans"]["stats"]["Strength"]+$Final_Tlaxcalan_Players>><</link>>. <br>
<br>


<</liveblock>>



:: test equations outcome {"position":"4475,550","size":"100,100"}
<<liveblock>>
<<print $factions["Aztecs"]["stats"]["Strength"]>><br>
<br>

<<print $Final_Aztec_Points>><br>
<br>

<<print $Final_Spanish_Points>><br>
<br>
<<print $Final_Tlaxcalan_Points>><br>
<br>
[[test equations]]<br>
<br>
[[Dashboard]]<br>
<br>


<</liveblock>>


